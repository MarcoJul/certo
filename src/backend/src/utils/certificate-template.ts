/**
 * Certificate template generator
 * Creates a dynamic SVG certificate based on credential data
 */

interface CertificateData {
  recipientName: string
  achievementName: string
  issuerName: string
  issueDate: string
  credentialId: string
  badgeImageUrl?: string
}

/**
 * Generate a certificate SVG template based on provided data
 */
export const generateCertificateSvg = (data: CertificateData): string => {
  const {
    recipientName,
    achievementName,
    issuerName,
    issueDate,
    credentialId,
    badgeImageUrl
  } = data

  // Format date nicely
  const formattedDate = new Date(issueDate).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  })

  // Badge image with fallback
  const badgeImage = badgeImageUrl 
    ? `<image href="${badgeImageUrl}" x="350" y="100" width="100" height="100" />`
    : `<circle cx="400" cy="160" r="50" fill="#ffd700" /><text x="400" y="170" text-anchor="middle" font-size="40" font-weight="bold" fill="#333">üèÜ</text>`

  // Generate the SVG
  return `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="650" viewBox="0 0 800 650" xmlns="http://www.w3.org/2000/svg">
  <!-- Certificate Background -->
  <rect x="0" y="0" width="800" height="600" fill="#f9f9f9" />
  
  <!-- Decorative Border -->
  <rect x="20" y="20" width="760" height="560" fill="none" stroke="#d4af37" stroke-width="3" />
  <rect x="25" y="25" width="750" height="550" fill="none" stroke="#d4af37" stroke-width="1" />
  
  <!-- Corner Ornaments -->
  <path d="M20,20 C50,40 40,50 20,50 Z" fill="#d4af37" />
  <path d="M780,20 C750,40 760,50 780,50 Z" fill="#d4af37" />
  <path d="M20,580 C50,560 40,550 20,550 Z" fill="#d4af37" />
  <path d="M780,580 C750,560 760,550 780,550 Z" fill="#d4af37" />
  
  <!-- Certificate Title -->
  <text x="400" y="90" font-family="'Georgia', serif" font-size="36" font-weight="bold" text-anchor="middle" fill="#333">Certificate of Achievement</text>
  
  <!-- Badge Image / Logo -->
  ${badgeImage}
  
  <!-- Main Text -->
  <text x="400" y="210" font-family="'Georgia', serif" font-size="16" text-anchor="middle" fill="#555">This is to certify that</text>
  
  <!-- Recipient Name -->
  <text x="400" y="260" font-family="'Georgia', serif" font-size="32" font-weight="bold" text-anchor="middle" fill="#333">${escapeXml(recipientName)}</text>
  
  <!-- Achievement Description -->
  <text x="400" y="310" font-family="'Georgia', serif" font-size="16" text-anchor="middle" fill="#555">has successfully completed</text>
  
  <!-- Achievement Name -->
  <text x="400" y="360" font-family="'Georgia', serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#333">${escapeXml(achievementName)}</text>
  
  <!-- Issuer Info -->
  <text x="400" y="430" font-family="'Georgia', serif" font-size="16" text-anchor="middle" fill="#555">Issued by</text>
  <text x="400" y="460" font-family="'Georgia', serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#333">${escapeXml(issuerName)}</text>
  
  <!-- Date -->
  <text x="400" y="510" font-family="'Georgia', serif" font-size="16" text-anchor="middle" fill="#555">on ${formattedDate}</text>
  
  <!-- Signature Line -->
  <line x1="250" y1="460" x2="550" y2="460" stroke="#333" stroke-width="1" />
  <!-- SVG Signature -->
  <g transform="translate(320, 475) scale(0.35)">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="544.5292431302236" height="200" viewBox="-6.360000133514404 -8.480000019073486 161.1999969482422 52.880001068115234">
      <path d="M-1.12 25.08L-1.12 25.08Q-3.44 25.60-5.24 26.24L-5.24 26.24Q-5.24 26.36-5.16 26.48L-5.16 26.48Q-4.84 26.84-2.48 27.44L-2.48 27.44Q-1.76 26.12-1.12 25.08ZM3.92 18.84L3.92 18.84L2.76 20.32L1.68 21.64Q1.36 22.04 0.88 22.72L0.88 22.72L0 23.96Q2.56 23.40 7.04 22.68L7.04 22.68L14.56 21.44Q17.68 20.92 21.24 19.74Q24.80 18.56 27.12 16.92L27.12 16.92Q27.40 15.56 26.92 14.54Q26.44 13.52 25.48 12.94Q24.52 12.36 23.18 12.02Q21.84 11.68 20.64 11.60L20.64 11.60Q19.44 11.52 18.20 11.60L18.20 11.60Q14.04 11.84 10.80 13.68L10.80 13.68Q7.56 15.52 3.92 18.84ZM15.60 32.84L15.60 32.84Q14.72 32.84 13.92 32.96L13.92 32.96L14.16 33.12Q14.88 32.96 15.60 32.84ZM0.44 37.32L0.44 37.32Q2.28 36.92 5.66 35.66Q9.04 34.40 10.32 34.04L10.32 34.04Q11.20 33.80 12.04 33.60L12.04 33.60L11.64 33.32Q6.44 34.36 0.44 37.32ZM-2.20 38.68L-1.08 37.56Q5.24 34.12 10.52 32.72L10.52 32.72L9.52 32.24Q9 32 8.40 31.76L8.40 31.76L7.36 31.40Q6.96 31.24 6.24 31.04L6.24 31.04L5.20 30.72Q4.84 30.64 4.02 30.42Q3.20 30.20 3 30.14Q2.80 30.08 1.88 29.86Q0.96 29.64 0.88 29.60L0.88 29.60Q0.76 29.56-0.48 29.28L-0.48 29.28L-2.56 28.84Q-3.48 30.88-4.10 32.90Q-4.72 34.92-5 36.96Q-5.28 39-5.14 40.72Q-5 42.44-4.22 43.76Q-3.44 45.08-2.08 45.76Q-0.72 46.44 1.60 46.32Q3.92 46.20 6.96 45.12L6.96 45.12Q8.76 44.48 12.16 42.60L12.16 42.60L13.56 41.80Q14.20 41.44 14.64 41.16L14.64 41.16L15.60 40.52L16.44 40Q16.72 39.80 17.28 39.36L17.28 39.36L18.08 38.72L19.04 37.96L20.04 37.12L20.16 37Q20.60 36.40 20.80 36.08L20.80 36.08L21.28 35.36Q21.60 34.88 21.64 34.64Q21.68 34.40 21.68 34.10Q21.68 33.80 21.44 33.60Q21.20 33.40 20.80 33.24L20.80 33.24Q18.80 33.24 15.32 33.80L15.32 33.80L15.04 33.84Q16.88 35.52 17.76 37.68L17.76 37.68L16.64 38.80Q15.56 36.12 13 34.24L13 34.24Q11.12 34.64 9.20 35.16L9.20 35.16Q8.32 35.40 4.16 36.92Q0 38.44-2.20 38.68L-2.20 38.68ZM22.80 33.40L22.80 33.40Q22.72 33.64 22.60 33.90Q22.48 34.16 22.24 34.52Q22 34.88 21.84 35.12L21.84 35.12L21.28 35.84Q20.92 36.32 20.76 36.56L20.76 36.56L19.64 37.68L18.08 38.96L16.72 40.08Q16.32 40.36 15.60 40.88L15.60 40.88L14.32 41.76Q13.80 42.12 12.96 42.64L12.96 42.64L11.04 43.72Q7.64 45.60 5.84 46.24L5.84 46.24Q2.64 47.36 0.26 47.46Q-2.12 47.56-3.46 46.76Q-4.80 45.96-5.54 44.50Q-6.28 43.04-6.32 41.18Q-6.36 39.32-5.96 37.14Q-5.56 34.96-4.84 32.86Q-4.12 30.76-3.12 28.72L-3.12 28.72Q-5.92 28.04-6.28 27.60L-6.28 27.60Q-6.36 27.40-6.36 27.28Q-6.36 27.16-6.28 26.92Q-6.20 26.68-6.20 26.56L-6.20 26.56L-5.08 25.44Q-3.08 24.68-0.44 24.08L-0.44 24.08Q-0.20 23.76 3.04 19.68L3.04 19.68L4.16 18.56Q6.12 16.72 7.58 15.52Q9.04 14.32 10.96 13.12Q12.88 11.92 14.96 11.26Q17.04 10.60 19.32 10.48L19.32 10.48Q20.56 10.40 21.82 10.48Q23.08 10.56 24.44 10.92Q25.80 11.28 26.74 11.88Q27.68 12.48 28.12 13.58Q28.56 14.68 28.16 16.12L28.16 16.12L27.04 17.24Q25.24 18.76 22.74 19.90Q20.24 21.04 17.24 21.74Q14.24 22.44 11.52 22.88L11.52 22.88L5.20 23.92Q1.64 24.48-0.60 25L-0.60 25Q-1.12 25.88-1.72 27.04L-1.72 27.04L-2 27.60Q-0.96 27.84 0.48 28.14Q1.92 28.44 2 28.48L2 28.48Q2.08 28.48 3.02 28.72Q3.96 28.96 4.14 29.02Q4.32 29.08 5.20 29.30Q6.08 29.52 6.36 29.60Q6.64 29.68 7.42 29.92Q8.20 30.16 8.56 30.32L8.56 30.32L9.60 30.72Q10.28 30.96 10.74 31.16Q11.20 31.36 11.74 31.64Q12.28 31.92 12.76 32.20L12.76 32.20Q13.56 32.04 14.32 31.92L14.32 31.92Q16.56 31.56 19.44 31.72L19.44 31.72Q21.16 31.80 21.92 32.12L21.92 32.12Q27.76 32.12 24.96 36.16L24.96 36.16Q24.56 36.76 24.02 37.36Q23.48 37.96 22.72 38.72L22.72 38.72L21.64 39.80Q20.92 40.60 18.12 43.40Q15.32 46.20 13.68 48.16L13.68 48.16Q12 50.16 10.76 52.32L10.76 52.32Q8.36 56.48 9.88 58L9.88 58Q10.20 58.32 10.66 58.52Q11.12 58.72 11.72 58.90Q12.32 59.08 12.64 59.24L12.64 59.24L11.52 60.36Q11.20 60.24 10.60 60.04Q10 59.84 9.54 59.64Q9.08 59.44 8.76 59.12L8.76 59.12Q7.24 57.60 9.64 53.44L9.64 53.44Q10.88 51.32 12.54 49.34Q14.20 47.36 16.96 44.56L16.96 44.56L20.52 40.92Q20.84 40.56 21.58 39.82Q22.32 39.08 22.86 38.48Q23.40 37.88 23.84 37.28L23.84 37.28Q26.08 34.08 22.80 33.40ZM28.44 38.68L28.44 38.68Q30.88 38.24 35.28 37.12L35.28 37.12Q35.36 37.08 35.46 36.96Q35.56 36.84 35.64 36.76Q35.72 36.68 35.78 36.60Q35.84 36.52 35.84 36.48Q35.84 36.44 35.76 36.40L35.76 36.40Q32.88 35.76 28.44 38.68ZM37.24 37.48L35.12 38.04Q34.64 38.88 34.32 39.72L34.32 39.72L33.20 40.84Q33.64 39.64 34.60 38.16L34.60 38.16Q29.40 39.48 26.72 39.92L26.72 39.92L27.84 38.80Q33.48 34.52 36.88 35.28L36.88 35.28Q37 35.36 36.94 35.46Q36.88 35.56 36.64 35.80L36.64 35.80L36.32 36.12L35.72 37.04L38.36 36.36L37.24 37.48ZM44 39.80L44 39.80Q44.52 39.08 44.64 38.64L44.64 38.64Q45.24 36.32 39.76 36.52L39.76 36.52Q39.40 37.84 39.28 38.82Q39.16 39.80 39.30 40.56Q39.44 41.32 39.92 41.52Q40.40 41.72 41.44 41.32Q42.48 40.92 44 39.80ZM35.72 36.84L36.84 35.72L39.52 34.72Q40.48 31.72 42.76 26.08Q45.04 20.44 45.96 17.64L45.96 17.64L47.08 16.52Q46.80 17.60 45.88 20.66Q44.96 23.72 44.48 25.82Q44 27.92 43.84 30.12L43.84 30.12L42.72 31.24Q42.92 28.48 43.80 25.12L43.80 25.12Q41.56 30.76 40.56 33.84L40.56 33.84L40.40 34.40Q43.92 33.16 46.76 32.76L46.76 32.76L45.64 33.88Q43.12 34.28 40.12 35.24L40.12 35.24L40.08 35.44Q41.16 35.32 42.24 35.38Q43.32 35.44 44.20 35.60Q45.08 35.76 45.52 36.26Q45.96 36.76 45.76 37.52L45.76 37.52Q45.68 37.80 45.52 38.08Q45.36 38.36 45.12 38.70Q44.88 39.04 44.76 39.24L44.76 39.24L43.64 40.36Q42.04 41.60 40.92 42.20Q39.80 42.80 39.20 42.72Q38.60 42.64 38.32 42.20Q38.04 41.76 38.10 40.82Q38.16 39.88 38.36 38.88Q38.56 37.88 38.96 36.56L38.96 36.56Q38.16 36.60 37.04 36.72Q35.92 36.84 35.72 36.84L35.72 36.84ZM50.44 35L50.44 35Q50.08 37.44 49.72 38.88L49.72 38.88Q49.60 39.32 49.10 40.14Q48.60 40.96 48.48 41.40L48.48 41.40L47.36 42.52Q47.40 41.52 47.16 35.88L47.16 35.88L46.72 36.32Q46.48 34.84 46 33.28L46 33.28L47.12 32.16Q47.24 32.32 47.52 32.60Q47.80 32.88 47.98 33.14Q48.16 33.40 48.24 33.68L48.24 33.68Q48.36 34.16 48.48 40.36L48.48 40.36Q48.56 40.16 48.60 40L48.60 40Q48.84 39.04 49.04 37.92L49.04 37.92L49.40 35.44L49.72 33.32L50.84 32.20Q51.64 33.80 51.96 35.24L51.96 35.24Q52.08 35.72 52.20 35.80Q52.32 35.88 52.96 35.80L52.96 35.80L53.20 35.80L52.08 36.92Q52 36.92 51.84 36.96L51.84 36.96Q51.20 37 51.06 36.92Q50.92 36.84 50.84 36.36L50.84 36.36Q50.68 35.64 50.44 35ZM53.32 40.40L52.20 41.52Q52.20 40.76 52.16 40.30Q52.12 39.84 52.24 39.12Q52.36 38.40 52.42 38Q52.48 37.60 52.68 36.92L52.68 36.92L53 35.84Q53.12 35.48 53.40 34.80L53.40 34.80L53.80 33.76L54.24 32.64Q54.52 31.96 54.72 31.52L54.72 31.52L55.84 30.40Q55.84 30.52 55.58 33.70Q55.32 36.88 55.52 39.16Q55.72 41.44 56.64 41.72L56.64 41.72Q56.96 41.80 57.26 41.60Q57.56 41.40 57.92 41Q58.28 40.60 58.48 40.48L58.48 40.48L57.36 41.60Q57.16 41.76 56.80 42.14Q56.44 42.52 56.14 42.72Q55.84 42.92 55.52 42.84L55.52 42.84Q54.92 42.68 54.62 41.74Q54.32 40.80 54.34 39.10Q54.36 37.40 54.40 36.36Q54.44 35.32 54.60 33.48L54.60 33.48Q53.12 37.32 53.32 40.40L53.32 40.40ZM54.64 26.88Q54.88 27.12 54.88 27.44Q54.88 27.76 54.64 28Q54.40 28.24 54.08 28.24Q53.76 28.24 53.52 28Q53.28 27.76 53.28 27.44Q53.28 27.12 53.52 26.88Q53.76 26.64 54.08 26.64Q54.40 26.64 54.64 26.88ZM59.56 34.96L59.56 34.96Q57.16 37.80 58 38.84L58 38.84Q58.56 37.96 61.36 34.40L61.36 34.40Q62.24 33.32 62 33.32L62 33.32Q61.68 33.36 59.56 34.96ZM57.80 40.52L57.80 40.52L56.80 41.52Q56.84 41 57.20 40.28L57.20 40.28Q55.52 39.24 59.16 35.28L59.16 35.28L60.28 34.16Q63.20 31.92 63.20 32.24L63.20 32.24Q63.20 32.40 61.12 34.96L61.12 34.96Q59.04 37.64 58.32 39.12L58.32 39.12Q59 39.52 60.40 39.56Q61.80 39.60 64.02 39.44Q66.24 39.28 67.32 39.28L67.32 39.28L66.20 40.40Q65.12 40.40 63.10 40.54Q61.08 40.68 60.12 40.70Q59.16 40.72 57.80 40.52ZM71.40 16.12L72.28 15.24L72.52 15.88L71.64 16.76L71.52 16.36Q70.44 18.28 69.66 21.94Q68.88 25.60 68.50 29.86Q68.12 34.12 67.94 37.14Q67.76 40.16 67.72 42.80L67.72 42.80L66.84 43.68Q66.92 40.72 67.12 37.44Q67.32 34.16 67.78 29.52Q68.24 24.88 69.18 21.20Q70.12 17.52 71.40 16.12L71.40 16.12ZM73.56 34.96L73.56 34.96Q71.16 37.80 72 38.84L72 38.84Q72.56 37.96 75.36 34.40L75.36 34.40Q76.24 33.32 76 33.32L76 33.32Q75.68 33.36 73.56 34.96ZM71.80 40.52L71.80 40.52L70.80 41.52Q70.84 41 71.20 40.28L71.20 40.28Q69.52 39.24 73.16 35.28L73.16 35.28L74.28 34.16Q77.20 31.92 77.20 32.24L77.20 32.24Q77.20 32.40 75.12 34.96L75.12 34.96Q73.04 37.64 72.32 39.12L72.32 39.12Q73 39.52 74.40 39.56Q75.80 39.60 78.02 39.44Q80.24 39.28 81.32 39.28L81.32 39.28L80.20 40.40Q79.12 40.40 77.10 40.54Q75.08 40.68 74.12 40.70Q73.16 40.72 71.80 40.52ZM97.84 38.40L97.76 38.56L98.68 38.36L98.60 37.68L98.32 37.76Q98.04 38.08 97.84 38.40L97.84 38.40ZM101.76 38.28L101.76 38.28Q99.76 38.96 97.72 39.44L97.72 39.44L97.28 39.56Q95.80 43.20 95.88 45.56L95.88 45.56Q95.92 47.88 98 46.56L98 46.56Q100 42.88 101.76 38.28ZM92.04 38.76L91.84 38.80Q93.64 39.44 97.40 38.64L97.40 38.64L98.24 37.76Q95.04 38.48 92.04 38.76L92.04 38.76ZM119.48 27.44L118.36 28.56Q110.20 35.20 102.56 38L102.56 38Q100.84 42.40 98.84 45.96L98.84 45.96L97.72 47.08Q94.64 49.56 94.72 46.40L94.72 46.40Q94.80 43.92 96.24 40.48L96.24 40.48Q96.44 40 96.60 39.72L96.60 39.72Q90.56 41.04 89.32 38.84L89.32 38.84Q86.64 38.72 85 37.74Q83.36 36.76 82.88 35.20Q82.40 33.64 82.74 31.64Q83.08 29.64 84.16 27.48Q85.24 25.32 86.92 23.20L86.92 23.20Q87.56 22.36 88.36 21.52L88.36 21.52L90.16 19.60L91.76 18L92.88 16.88L96.96 14Q98.40 13.04 100.64 11.72Q102.88 10.40 104.98 9.62Q107.08 8.84 109.32 8.44L109.32 8.44L110.28 7.48L110.36 8.28Q111.20 8.16 112.04 8.08L112.04 8.08Q115.24 7.84 118.06 8.70Q120.88 9.56 122.76 11.66Q124.64 13.76 124.68 16.72L124.68 16.72L126.48 16.52L125.36 17.64L124.68 17.72Q124.56 18.76 124.28 19.84L124.28 19.84Q123.96 21 123.36 22.14Q122.76 23.28 122.40 23.78Q122.04 24.28 120.88 25.70Q119.72 27.12 119.48 27.44L119.48 27.44ZM123.48 16.88L123.48 16.88Q123.12 14.24 121.22 12.38Q119.32 10.52 116.62 9.74Q113.92 8.96 110.92 9.20L110.92 9.20Q110.64 9.24 110.40 9.24L110.40 9.24Q110.40 10.96 110 13.10Q109.60 15.24 109.28 16.38Q108.96 17.52 108.16 20.12L108.16 20.12Q109.20 19.68 110.24 19.32L110.24 19.32L112 18.72Q112.76 18.48 113.88 18.24L113.88 18.24L115.52 17.88Q116.08 17.76 117.40 17.58Q118.72 17.40 119.16 17.36Q119.60 17.32 121.28 17.12Q122.96 16.92 123.48 16.88ZM123.56 17.88L123.56 17.88L120.48 18.24Q118.48 18.44 117.64 18.54Q116.80 18.64 115.32 18.86Q113.84 19.08 112.86 19.32Q111.88 19.56 110.58 19.96Q109.28 20.36 107.92 20.92L107.92 20.92L107.64 21.88Q104.52 32.56 103.44 35.56L103.44 35.56Q112.48 32.84 117.84 28.32L117.84 28.32L116.72 29.44Q111.64 33.76 103.12 36.44L103.12 36.44L102.88 37.16Q110.68 34.48 118.84 27.96L118.84 27.96L119.60 27.04L120.40 26.08Q120.60 25.84 121.06 25.22Q121.52 24.60 121.72 24.22Q121.92 23.84 122.24 23.28Q122.56 22.72 122.78 22.16Q123 21.60 123.16 20.96L123.16 20.96Q123.60 19.36 123.56 17.88ZM96.04 27.52L96.68 26.88L99.20 25.12L102.20 23.12Q103.56 22.24 104.84 21.64L104.84 21.64L107.24 20.52Q107.96 18.16 108.34 16.76Q108.72 15.36 109.02 13.26Q109.32 11.16 109.24 9.40L109.24 9.40Q106.80 9.76 104.56 10.50Q102.32 11.24 100 12.58Q97.68 13.92 96.16 14.96L96.16 14.96L91.92 17.88Q88.96 20.92 88.04 22.08L88.04 22.08Q86.04 24.64 84.92 27.12L84.92 27.12Q83.80 29.68 83.68 31.86Q83.56 34.04 84.92 35.60Q86.28 37.16 89.04 37.56L89.04 37.56Q89.04 37.32 89.08 37L89.08 37Q89.36 34.84 90.64 33.08L90.64 33.08Q91.48 31.92 93.08 30.40L93.08 30.40Q92.32 31.20 91.76 31.96L91.76 31.96Q90.48 33.72 90.20 35.88L90.20 35.88Q90.04 37 90.48 37.72L90.48 37.72Q91.72 37.76 93.16 37.64L93.16 37.64Q96.16 37.36 99.36 36.64L99.36 36.64L99.68 36.32L99.72 36.56Q101.20 36.24 102.64 35.80L102.64 35.80Q103.84 32.36 106.52 23L106.52 23L107.04 21.28Q105.48 21.92 103.72 22.76L103.72 22.76Q102.40 23.40 101.04 24.26Q99.68 25.12 98.08 26.28Q96.48 27.44 95.56 28L95.56 28L96.04 27.52L94.80 28.72Q93.64 29.80 93.08 30.40L93.08 30.40Q95.44 28.16 95.56 28L95.56 28L96.04 27.52ZM102.08 37.44L102.32 36.68Q101.12 37.08 99.84 37.40L99.84 37.40L98.96 38.28Q100.52 37.92 102.08 37.44L102.08 37.44ZM127.40 35.56L127.40 35.56L128.52 34.44Q127.88 38.16 128.32 38.56L128.32 38.56Q128.52 38.72 129.32 38.72L129.32 38.72Q130.28 37.36 131.68 34.80L131.68 34.80L132.80 33.68Q130.96 37.08 129.56 38.72L129.56 38.72L128.44 39.84Q128.20 39.80 128 39.84Q127.80 39.88 127.56 39.84Q127.32 39.80 127.20 39.68L127.20 39.68Q126.72 39.28 127.40 35.56ZM136.88 16.12L137.76 15.24L138 15.88L137.12 16.76L137 16.36Q135.92 18.28 135.14 21.94Q134.36 25.60 133.98 29.86Q133.60 34.12 133.42 37.14Q133.24 40.16 133.20 42.80L133.20 42.80L132.32 43.68Q132.40 40.72 132.60 37.44Q132.80 34.16 133.26 29.52Q133.72 24.88 134.66 21.20Q135.60 17.52 136.88 16.12L136.88 16.12ZM138.08 40.40L136.96 41.52Q136.96 40.76 136.92 40.30Q136.88 39.84 137 39.12Q137.12 38.40 137.18 38Q137.24 37.60 137.44 36.92L137.44 36.92L137.76 35.84Q137.88 35.48 138.16 34.80L138.16 34.80L138.56 33.76L139 32.64Q139.28 31.96 139.48 31.52L139.48 31.52L140.60 30.40Q140.60 30.52 140.34 33.70Q140.08 36.88 140.28 39.16Q140.48 41.44 141.40 41.72L141.40 41.72Q141.72 41.80 142.02 41.60Q142.32 41.40 142.68 41Q143.04 40.60 143.24 40.48L143.24 40.48L142.12 41.60Q141.92 41.76 141.56 42.14Q141.20 42.52 140.90 42.72Q140.60 42.92 140.28 42.84L140.28 42.84Q139.68 42.68 139.38 41.74Q139.08 40.80 139.10 39.10Q139.12 37.40 139.16 36.36Q139.20 35.32 139.36 33.48L139.36 33.48Q137.88 37.32 138.08 40.40L138.08 40.40ZM139.40 26.88Q139.64 27.12 139.64 27.44Q139.64 27.76 139.40 28Q139.16 28.24 138.84 28.24Q138.52 28.24 138.28 28Q138.04 27.76 138.04 27.44Q138.04 27.12 138.28 26.88Q138.52 26.64 138.84 26.64Q139.16 26.64 139.40 26.88ZM142.28 32.12L141.16 33.24Q140.96 33.20 140.78 33.16Q140.60 33.12 140.50 33.10Q140.40 33.08 140.36 33.06Q140.32 33.04 140.24 33.04L140.24 33.04L140.16 33.04Q140.12 33.04 139.96 33.08Q139.80 33.12 139.68 33.16L139.68 33.16L140.80 32.04Q142.64 30.84 144.80 29.88L144.80 29.88Q145.36 25.16 145.40 22.32L145.40 22.32Q144.96 18.44 144.96 15.80L144.96 15.80L146.08 14.68Q146.60 17.68 146.52 21.16L146.52 21.16L146.64 22.12L146.48 22.28Q146.40 24.84 145.84 29.40L145.84 29.40Q147.36 28.76 149.56 28L149.56 28L148.44 29.12Q146.88 29.68 145.76 30.12L145.76 30.12Q145.28 34.08 145.12 36.12L145.12 36.12Q145.12 36.40 145.04 37.18Q144.96 37.96 144.94 38.36Q144.92 38.76 144.90 39.46Q144.88 40.16 145 40.60Q145.12 41.04 145.30 41.58Q145.48 42.12 145.84 42.52Q146.20 42.92 146.68 43.24L146.68 43.24L145.56 44.36Q145.04 44.04 144.70 43.64Q144.36 43.24 144.16 42.70Q143.96 42.16 143.86 41.72Q143.76 41.28 143.76 40.58Q143.76 39.88 143.78 39.48Q143.80 39.08 143.88 38.30Q143.96 37.52 144 37.24L144 37.24Q144.16 35.24 144.72 30.52L144.72 30.52Q143.08 31.24 141.68 31.96L141.68 31.96Q141.96 32.04 142.28 32.12L142.28 32.12ZM149.68 40.40L148.56 41.52Q148.56 40.76 148.52 40.30Q148.48 39.84 148.60 39.12Q148.72 38.40 148.78 38Q148.84 37.60 149.04 36.92L149.04 36.92L149.36 35.84Q149.48 35.48 149.76 34.80L149.76 34.80L150.16 33.76L150.60 32.64Q150.88 31.96 151.08 31.52L151.08 31.52L152.20 30.40Q152.20 30.52 151.94 33.70Q151.68 36.88 151.88 39.16Q152.08 41.44 153 41.72L153 41.72Q153.32 41.80 153.62 41.60Q153.92 41.40 154.28 41Q154.64 40.60 154.84 40.48L154.84 40.48L153.72 41.60Q153.52 41.76 153.16 42.14Q152.80 42.52 152.50 42.72Q152.20 42.92 151.88 42.84L151.88 42.84Q151.28 42.68 150.98 41.74Q150.68 40.80 150.70 39.10Q150.72 37.40 150.76 36.36Q150.80 35.32 150.96 33.48L150.96 33.48Q149.48 37.32 149.68 40.40L149.68 40.40ZM151 26.88Q151.24 27.12 151.24 27.44Q151.24 27.76 151 28Q150.76 28.24 150.44 28.24Q150.12 28.24 149.88 28Q149.64 27.76 149.64 27.44Q149.64 27.12 149.88 26.88Q150.12 26.64 150.44 26.64Q150.76 26.64 151 26.88Z" fill="black"></path>
    </svg>
  </g>
  <text x="400" y="500" font-family="'Georgia', serif" font-size="16" text-anchor="middle" fill="#555">Authorized Signature</text>
  <text x="400" y="560" font-size="14" fill="#888" text-anchor="middle">Credential ID: ${escapeXml(credentialId)}</text>
</svg>`
}

/**
 * Escape XML special characters to prevent SVG injection attacks
 */
const escapeXml = (unsafe: string): string => {
  return unsafe.replace(/[<>&'"]/g, (c) => {
    switch (c) {
      case '<': return '&lt;'
      case '>': return '&gt;'
      case '&': return '&amp;'
      case '\'': return '&apos;'
      case '"': return '&quot;'
      default: return c
    }
  })
} 